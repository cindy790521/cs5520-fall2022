import { StyleSheet, Text, View ,TextInput, Button,Modal,Image} from 'react-native';
import React,{useState} from 'react';
import ImageManager from './ImageManager.js';
import { setIndexConfiguration } from 'firebase/firestore';

export default function Input({onAdd,modal,onCancel}) {
    
    const [text,setText]=useState("");
    const [uri,setUri]=useState("");
    const imageHandler=(uri)=>{
      console.log('imageHandler called',uri);
      setUri(uri);
    }
    return (
      <Modal visible={modal}>
      <View style={styles.container}>
        <Image 
        
        source={{uri:'https://cdn-icons-png.flaticon.com/512/2617/2617812.png'}}
        style={styles.image}
        />
      <TextInput 
        value={text}
        onChangeText={(newText)=>{setText(newText)}}
        placeholder="type sth"
        style={styles.input}
        />
        <ImageManager imageHandler={imageHandler}/>
        <View style={styles.buttonContainer}>

        <View style={styles.button}>
        <Button
        title="confirm"
        onPress={()=>{
            onAdd({text, uri});
            setText("");
        }}
        disabled={text.length?false:true}
        // if onAdd not in a function, will render repeatedly
        />
        </View>


        <View style={styles.button}>
        <Button title="cancel" onPress={onCancel}/>
        </View>
        </View>
        <Text>inputed:{text}</Text>
      </View>
      </Modal>
  );
}
  const styles = StyleSheet.create({
    container: {
      flex: 1,
      backgroundColor: '#fff',
      alignItems: 'center',
      justifyContent: 'center',
    },
    input:{
      color:'red',
      borderBottomWidth:2,
      borderBottomColor:'purple',
      margin:5,
      // padding:10
    },
    button:{
      margin:5,
      width:'30%'
    },
    image:{
      width:100,
      height:100
    },
    buttonContainer:{
flexDirection:'row'
    }
  });
  